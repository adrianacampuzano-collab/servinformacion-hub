<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hub Comercial Regional Â· ServinformaciÃ³n</title>
<link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Montserrat:wght@300;400;600;700;900&display=swap" rel="stylesheet">
<style>
:root {
  --blue: #008DD4; --red: #D0131F;
  --dark: #0a1628; --dark2: #0d1f3c;
  --surface: #111d35; --surface2: #162340;
  --border: rgba(0,141,212,0.18);
  --text: #e8f4fc; --text2: #8aafc8; --white: #ffffff;
  --grid: rgba(0,141,212,0.04);
}
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Google Sans','Montserrat',sans-serif; background:var(--dark); color:var(--text); min-height:100vh; overflow-x:hidden; }
body::before { content:''; position:fixed; inset:0; background-image: linear-gradient(var(--grid) 1px,transparent 1px), linear-gradient(90deg,var(--grid) 1px,transparent 1px); background-size:40px 40px; pointer-events:none; z-index:0; }
.orb { position:fixed; border-radius:50%; filter:blur(120px); pointer-events:none; z-index:0; opacity:.14; }
.orb1 { width:600px; height:600px; background:var(--blue); top:-200px; right:-100px; }
.orb2 { width:400px; height:400px; background:var(--red); bottom:100px; left:-100px; }

/* LAYOUT */
.layout { position:relative; z-index:1; display:grid; grid-template-columns:270px 1fr 390px; grid-template-rows:64px 1fr; height:100vh; }

/* TOPBAR */
.topbar { grid-column:1/-1; display:flex; align-items:center; justify-content:space-between; padding:0 24px; background:rgba(10,22,40,0.92); border-bottom:1px solid var(--border); backdrop-filter:blur(12px); gap:14px; }
.logo { display:flex; align-items:center; gap:10px; flex-shrink:0; }
.logo-icon { width:36px; height:36px; background:var(--red); border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:18px; font-weight:900; color:white; position:relative; overflow:hidden; }
.logo-icon::after { content:''; position:absolute; width:20px; height:20px; background:var(--blue); border-radius:50%; right:-6px; bottom:-6px; opacity:.7; }
.logo-text { font-size:15px; font-weight:700; color:white; }
.logo-sub { font-size:9px; color:var(--text2); letter-spacing:2px; text-transform:uppercase; }

.topbar-search { display:flex; align-items:center; gap:6px; background:var(--surface); border:1px solid var(--border); border-radius:10px; padding:7px 14px; flex:1; max-width:380px; }
.topbar-search input { background:transparent; border:none; outline:none; color:var(--text); font-family:inherit; font-size:13px; width:100%; }
.topbar-search input::placeholder { color:var(--text2); }

.topbar-right { display:flex; align-items:center; gap:10px; }

/* COUNTRY SELECTOR */
.country-selector { display:flex; align-items:center; gap:8px; background:var(--surface); border:1px solid var(--border); border-radius:10px; padding:6px 12px; cursor:pointer; position:relative; }
.country-flag { font-size:18px; }
.country-name { font-size:12px; font-weight:600; color:var(--text); }
.country-arrow { font-size:10px; color:var(--text2); }

.country-dropdown { position:absolute; top:calc(100% + 6px); right:0; background:var(--dark2); border:1px solid var(--border); border-radius:12px; padding:8px; min-width:220px; z-index:100; display:none; max-height:380px; overflow-y:auto; box-shadow:0 20px 60px rgba(0,0,0,0.5); }
.country-dropdown.open { display:block; animation:fadeIn .2s ease; }
.country-dropdown::-webkit-scrollbar { width:4px; }
.country-dropdown::-webkit-scrollbar-thumb { background:var(--border); border-radius:2px; }
.country-region-label { font-size:9px; font-weight:700; letter-spacing:2px; text-transform:uppercase; color:var(--text2); padding:6px 10px 4px; }
.country-option { display:flex; align-items:center; gap:10px; padding:8px 10px; border-radius:8px; cursor:pointer; transition:background .15s; }
.country-option:hover, .country-option.active { background:rgba(0,141,212,0.12); }
.country-option .flag { font-size:18px; }
.country-option .cname { font-size:12px; font-weight:600; color:var(--text); }
.country-option .currency { font-size:11px; color:var(--text2); margin-left:auto; }

.lang-toggle { display:flex; background:var(--surface); border:1px solid var(--border); border-radius:8px; overflow:hidden; }
.lang-btn { padding:6px 14px; font-size:12px; font-weight:600; cursor:pointer; border:none; background:transparent; color:var(--text2); font-family:inherit; transition:all .2s; }
.lang-btn.active { background:var(--blue); color:white; }

.hs-badge { display:flex; align-items:center; gap:6px; background:rgba(255,122,0,0.12); border:1px solid rgba(255,122,0,0.3); border-radius:8px; padding:5px 12px; font-size:12px; color:#ff9a00; font-weight:600; }
.hs-dot { width:7px; height:7px; background:#ff7a00; border-radius:50%; animation:pulse 2s infinite; }
@keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:.5;transform:scale(.8)} }
.avatar { width:34px; height:34px; border-radius:50%; background:linear-gradient(135deg,var(--blue),var(--red)); display:flex; align-items:center; justify-content:center; font-size:13px; font-weight:700; cursor:pointer; }

/* SIDEBAR */
.sidebar { background:rgba(13,31,60,0.85); border-right:1px solid var(--border); padding:20px 0; overflow-y:auto; backdrop-filter:blur(8px); }
.sidebar::-webkit-scrollbar { width:3px; }
.sidebar::-webkit-scrollbar-thumb { background:var(--border); }
.sidebar-section { margin-bottom:28px; }
.sidebar-label { font-size:9px; font-weight:700; letter-spacing:2.5px; text-transform:uppercase; color:var(--text2); padding:0 18px; margin-bottom:8px; }
.sidebar-item { display:flex; align-items:center; gap:9px; padding:8px 18px; cursor:pointer; transition:all .2s; border-left:2px solid transparent; font-size:12.5px; color:var(--text2); }
.sidebar-item:hover { background:rgba(0,141,212,0.08); color:var(--text); border-left-color:var(--blue); }
.sidebar-item.active { background:rgba(0,141,212,0.12); color:var(--white); border-left-color:var(--blue); }
.s-icon { width:28px; height:28px; border-radius:7px; display:flex; align-items:center; justify-content:center; font-size:13px; flex-shrink:0; }
.ic-blue{background:rgba(0,141,212,0.15)} .ic-red{background:rgba(208,19,31,0.15)} .ic-green{background:rgba(0,200,100,0.15)} .ic-orange{background:rgba(255,122,0,0.15)} .ic-purple{background:rgba(140,82,255,0.15)}
.sbadge { margin-left:auto; background:var(--red); color:white; font-size:10px; font-weight:700; padding:1px 7px; border-radius:10px; }
.sbadge.blue { background:var(--blue); }
.sbadge.green { background:#16a34a; }

/* MAIN */
.main { overflow-y:auto; padding:26px; scroll-behavior:smooth; }
.main::-webkit-scrollbar { width:4px; }
.main::-webkit-scrollbar-thumb { background:var(--border); border-radius:2px; }
.page { display:none; animation:fadeIn .3s ease; }
.page.active { display:block; }
@keyframes fadeIn { from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:translateY(0)} }

.page-title { font-size:24px; font-weight:700; color:white; letter-spacing:-.5px; line-height:1.2; }
.page-title span { color:var(--blue); }
.page-subtitle { font-size:13px; color:var(--text2); margin-top:3px; margin-bottom:22px; }

/* COUNTRY BANNER */
.country-banner { background:linear-gradient(90deg,rgba(0,141,212,0.1),rgba(208,19,31,0.06)); border:1px solid var(--border); border-radius:12px; padding:12px 18px; display:flex; align-items:center; gap:14px; margin-bottom:22px; }
.cb-flag { font-size:28px; }
.cb-info { flex:1; }
.cb-title { font-size:14px; font-weight:700; color:white; }
.cb-sub { font-size:11px; color:var(--text2); }
.cb-tags { display:flex; gap:6px; margin-top:6px; flex-wrap:wrap; }
.cb-tag { font-size:10px; font-weight:600; padding:2px 9px; border-radius:6px; }
.tag-blue { background:rgba(0,141,212,0.15); color:var(--blue); }
.tag-green { background:rgba(0,200,100,0.12); color:#4ade80; }
.tag-orange { background:rgba(255,122,0,0.12); color:#fb923c; }
.tag-red { background:rgba(208,19,31,0.12); color:#f87171; }

/* STATS */
.stats-row { display:grid; grid-template-columns:repeat(4,1fr); gap:12px; margin-bottom:22px; }
.stat-card { background:var(--surface); border:1px solid var(--border); border-radius:13px; padding:16px; position:relative; overflow:hidden; transition:transform .2s,border-color .2s; }
.stat-card::before { content:''; position:absolute; top:0;left:0;right:0; height:2px; background:linear-gradient(90deg,var(--blue),transparent); }
.stat-card.red::before { background:linear-gradient(90deg,var(--red),transparent); }
.stat-card:hover { transform:translateY(-2px); border-color:rgba(0,141,212,.35); }
.stat-label { font-size:10px; color:var(--text2); text-transform:uppercase; letter-spacing:1px; margin-bottom:6px; }
.stat-value { font-size:26px; font-weight:700; color:white; line-height:1; }
.stat-value span { font-size:13px; font-weight:400; color:var(--text2); margin-left:3px; }
.stat-change { font-size:11px; margin-top:5px; color:#4ade80; }
.stat-icon { position:absolute; right:14px; top:50%; transform:translateY(-50%); font-size:28px; opacity:.1; }

/* GRID */
.two-col { display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-bottom:22px; }
.three-col { display:grid; grid-template-columns:repeat(3,1fr); gap:14px; margin-bottom:22px; }
.cards-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(210px,1fr)); gap:13px; margin-bottom:22px; }

/* PANEL */
.panel { background:var(--surface); border:1px solid var(--border); border-radius:14px; overflow:hidden; margin-bottom:18px; }
.panel-header { padding:13px 18px; border-bottom:1px solid var(--border); display:flex; align-items:center; gap:10px; }
.panel-icon { font-size:18px; }
.panel-title { font-size:13px; font-weight:700; color:white; }
.panel-sub { font-size:11px; color:var(--text2); }
.panel-body { padding:16px 18px; }
.panel-header.hs { background:rgba(255,122,0,0.07); border-bottom:1px solid rgba(255,122,0,0.18); }
.panel-header.reg { background:rgba(140,82,255,0.07); border-bottom:1px solid rgba(140,82,255,0.18); }
.panel-header.idiom { background:rgba(0,200,100,0.07); border-bottom:1px solid rgba(0,200,100,0.18); }

.section-title { font-size:13px; font-weight:700; color:white; margin-bottom:12px; display:flex; align-items:center; gap:8px; }
.section-title::after { content:''; flex:1; height:1px; background:var(--border); }

/* MATERIAL CARD */
.material-card { background:var(--surface); border:1px solid var(--border); border-radius:13px; overflow:hidden; cursor:pointer; transition:all .25s; }
.material-card:hover { border-color:var(--blue); transform:translateY(-3px); box-shadow:0 10px 35px rgba(0,141,212,.14); }
.mc-thumb { height:100px; display:flex; align-items:center; justify-content:center; font-size:34px; position:relative; }
.t-blue{background:linear-gradient(135deg,rgba(0,141,212,.2),rgba(0,141,212,.04))}
.t-red{background:linear-gradient(135deg,rgba(208,19,31,.2),rgba(208,19,31,.04))}
.t-green{background:linear-gradient(135deg,rgba(0,200,100,.2),rgba(0,200,100,.04))}
.t-orange{background:linear-gradient(135deg,rgba(255,122,0,.2),rgba(255,122,0,.04))}
.t-purple{background:linear-gradient(135deg,rgba(140,82,255,.2),rgba(140,82,255,.04))}
.mc-version { position:absolute; top:8px; right:8px; background:rgba(0,0,0,.6); border:1px solid var(--border); border-radius:5px; font-size:10px; padding:2px 7px; color:var(--text2); }
.mc-flag { position:absolute; top:8px; left:8px; font-size:16px; }
.mc-body { padding:12px; }
.mc-title { font-size:12.5px; font-weight:600; color:white; margin-bottom:3px; line-height:1.4; }
.mc-meta { font-size:11px; color:var(--text2); }
.mc-footer { padding:9px 12px; border-top:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; }
.stage-pill { font-size:10px; font-weight:600; letter-spacing:.4px; text-transform:uppercase; padding:3px 8px; border-radius:5px; }
.sp-blue{background:rgba(0,141,212,.15);color:var(--blue)} .sp-red{background:rgba(208,19,31,.15);color:var(--red)}
.sp-green{background:rgba(0,200,100,.15);color:#4ade80} .sp-orange{background:rgba(255,122,0,.15);color:#fb923c}
.sp-purple{background:rgba(140,82,255,.15);color:#a78bfa}
.mc-action { background:none; border:none; cursor:pointer; color:var(--text2); font-size:13px; transition:color .2s; }
.mc-action:hover { color:var(--blue); }

/* PRICE TABLE */
.price-table { width:100%; border-collapse:collapse; }
.price-table th { font-size:10px; font-weight:700; text-transform:uppercase; letter-spacing:1.5px; color:var(--text2); padding:8px 12px; text-align:left; border-bottom:1px solid var(--border); }
.price-table td { padding:10px 12px; font-size:12.5px; border-bottom:1px solid rgba(0,141,212,0.07); transition:background .15s; }
.price-table tr:hover td { background:rgba(0,141,212,0.05); }
.price-table .country-cell { display:flex; align-items:center; gap:8px; }
.price-table .price-val { font-weight:700; color:var(--blue); }
.price-table .usd-val { color:var(--text2); font-size:11px; }

/* REGULATION ITEM */
.reg-item { padding:12px 0; border-bottom:1px solid var(--border); }
.reg-item:last-child { border:none; }
.reg-header { display:flex; align-items:center; gap:10px; margin-bottom:6px; cursor:pointer; }
.reg-title { font-size:13px; font-weight:600; color:white; flex:1; }
.reg-status { font-size:10px; font-weight:600; padding:2px 9px; border-radius:6px; }
.rs-ok{background:rgba(0,200,100,.12);color:#4ade80} .rs-warn{background:rgba(255,122,0,.12);color:#fb923c} .rs-info{background:rgba(0,141,212,.12);color:var(--blue)}
.reg-body { font-size:12px; color:var(--text2); line-height:1.7; display:none; padding:8px 0 4px; }
.reg-body.open { display:block; }

/* IDIOM CARD */
.idiom-card { background:var(--surface2); border:1px solid var(--border); border-radius:10px; padding:14px; margin-bottom:10px; }
.idiom-header { display:flex; align-items:center; gap:8px; margin-bottom:10px; }
.idiom-flag { font-size:20px; }
.idiom-country { font-size:13px; font-weight:700; color:white; }
.idiom-region { font-size:10px; color:var(--text2); }
.idiom-row { display:grid; grid-template-columns:1fr 1fr; gap:8px; }
.idiom-box { background:var(--surface); border-radius:8px; padding:10px; }
.idiom-box-label { font-size:9px; font-weight:700; letter-spacing:1.5px; text-transform:uppercase; margin-bottom:5px; }
.idiom-box-label.avoid { color:#f87171; }
.idiom-box-label.use { color:#4ade80; }
.idiom-item { font-size:11.5px; color:var(--text); padding:3px 0; border-bottom:1px solid rgba(255,255,255,0.04); line-height:1.5; }
.idiom-item:last-child { border:none; }

/* DEAL ITEM */
.deal-item { display:flex; align-items:center; gap:10px; padding:9px 0; border-bottom:1px solid var(--border); }
.deal-item:last-child { border:none; }
.deal-av { width:30px; height:30px; border-radius:50%; background:linear-gradient(135deg,var(--blue),#005a8a); display:flex; align-items:center; justify-content:center; font-size:11px; font-weight:700; flex-shrink:0; }
.deal-info { flex:1; }
.deal-name { font-size:12px; font-weight:600; color:white; }
.deal-co { font-size:11px; color:var(--text2); }
.deal-stage { font-size:10px; font-weight:600; padding:2px 8px; border-radius:5px; }
.deal-val { font-size:12px; font-weight:700; color:var(--blue); margin-left:6px; white-space:nowrap; }

/* ACTIVITY */
.act-item { display:flex; align-items:flex-start; gap:9px; padding:9px 0; border-bottom:1px solid var(--border); }
.act-item:last-child { border:none; }
.act-dot { width:7px; height:7px; border-radius:50%; margin-top:5px; flex-shrink:0; }
.act-text { font-size:12px; color:var(--text); line-height:1.5; }
.act-time { font-size:10px; color:var(--text2); margin-top:2px; }

/* VERSION BANNER */
.ver-banner { background:linear-gradient(90deg,rgba(0,141,212,.1),rgba(208,19,31,.06)); border:1px solid var(--border); border-radius:12px; padding:12px 18px; display:flex; align-items:center; justify-content:space-between; margin-bottom:18px; }
.ver-banner-left { display:flex; align-items:center; gap:10px; }
.ver-dot { width:9px; height:9px; background:#4ade80; border-radius:50%; animation:pulse 2s infinite; }
.ver-text { font-size:13px; font-weight:600; color:white; }
.ver-sub { font-size:11px; color:var(--text2); }
.ver-btn { background:var(--blue); border:none; border-radius:8px; padding:7px 16px; color:white; font-size:12px; font-weight:600; cursor:pointer; font-family:inherit; transition:background .2s; }
.ver-btn:hover { background:#00a3f0; }

/* CHAT */
.chat-panel { background:rgba(13,31,60,0.88); border-left:1px solid var(--border); display:flex; flex-direction:column; backdrop-filter:blur(8px); }
.chat-header { padding:14px 16px; border-bottom:1px solid var(--border); display:flex; align-items:center; gap:10px; }
.chat-ai-av { width:34px; height:34px; border-radius:10px; background:linear-gradient(135deg,var(--blue),var(--red)); display:flex; align-items:center; justify-content:center; font-size:16px; position:relative; }
.chat-ai-av::after { content:''; position:absolute; bottom:-2px; right:-2px; width:10px; height:10px; background:#4ade80; border-radius:50%; border:2px solid var(--dark); }
.chat-name { font-size:13px; font-weight:700; color:white; }
.chat-status { font-size:11px; color:#4ade80; }
.chat-lang-badge { margin-left:auto; font-size:10px; font-weight:600; background:rgba(0,141,212,.15); color:var(--blue); padding:3px 9px; border-radius:6px; }

.chat-messages { flex:1; overflow-y:auto; padding:14px; display:flex; flex-direction:column; gap:12px; }
.chat-messages::-webkit-scrollbar { width:3px; }
.chat-messages::-webkit-scrollbar-thumb { background:var(--border); border-radius:2px; }
.msg { display:flex; gap:7px; animation:fadeIn .3s ease; }
.msg.user { flex-direction:row-reverse; }
.msg-av { width:26px; height:26px; border-radius:7px; flex-shrink:0; display:flex; align-items:center; justify-content:center; font-size:11px; font-weight:700; align-self:flex-end; }
.av-ai{background:linear-gradient(135deg,var(--blue),#005a8a)} .av-user{background:linear-gradient(135deg,var(--red),#8a0010)}
.msg-bubble { max-width:82%; padding:9px 12px; border-radius:12px; font-size:12px; line-height:1.65; }
.msg-ai .msg-bubble { background:var(--surface2); border:1px solid var(--border); color:var(--text); border-bottom-left-radius:3px; }
.msg-user .msg-bubble { background:var(--blue); color:white; border-bottom-right-radius:3px; }
.msg-time { font-size:10px; color:var(--text2); margin-top:3px; }
.msg-ai .msg-time { text-align:left; }
.msg-user .msg-time { text-align:right; }
.msg-card { background:rgba(0,141,212,.1); border:1px solid rgba(0,141,212,.22); border-radius:9px; padding:9px 11px; margin-top:7px; cursor:pointer; transition:border-color .2s; }
.msg-card:hover { border-color:var(--blue); }
.msg-card-title { font-size:11.5px; font-weight:600; color:white; margin-bottom:2px; }
.msg-card-meta { font-size:10.5px; color:var(--text2); }

.quick-chips { padding:9px 14px; display:flex; flex-wrap:wrap; gap:5px; border-top:1px solid var(--border); }
.chip { background:var(--surface2); border:1px solid var(--border); border-radius:20px; padding:5px 11px; font-size:11px; color:var(--text2); cursor:pointer; transition:all .2s; font-family:inherit; }
.chip:hover { border-color:var(--blue); color:var(--blue); background:rgba(0,141,212,.07); }

.chat-input-area { padding:12px 14px; border-top:1px solid var(--border); display:flex; gap:7px; align-items:flex-end; }
.chat-input { flex:1; background:var(--surface); border:1px solid var(--border); border-radius:11px; padding:9px 13px; color:var(--text); font-family:inherit; font-size:12.5px; outline:none; resize:none; max-height:90px; line-height:1.5; transition:border-color .2s; }
.chat-input:focus { border-color:var(--blue); }
.chat-input::placeholder { color:var(--text2); }
.send-btn { width:36px; height:36px; background:var(--blue); border:none; border-radius:9px; cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:14px; transition:all .2s; flex-shrink:0; }
.send-btn:hover { background:#00a3f0; transform:scale(1.05); }
.typing { display:flex; gap:4px; align-items:center; padding:3px 0; }
.typing span { width:5px; height:5px; border-radius:50%; background:var(--text2); animation:bounce 1.2s infinite; }
.typing span:nth-child(2){animation-delay:.2s} .typing span:nth-child(3){animation-delay:.4s}
@keyframes bounce{0%,60%,100%{transform:translateY(0);opacity:.5}30%{transform:translateY(-5px);opacity:1}}

/* FUNNEL STAGES */
.funnel-row { display:grid; grid-template-columns:repeat(6,1fr); gap:10px; margin-bottom:20px; }
.f-stage { background:var(--surface); border:1px solid var(--border); border-radius:11px; padding:14px 10px; text-align:center; cursor:pointer; transition:all .2s; position:relative; }
.f-stage:hover,.f-stage.active { border-color:var(--blue); background:rgba(0,141,212,.1); }
.f-icon { font-size:20px; margin-bottom:6px; }
.f-name { font-size:10px; font-weight:600; color:var(--text2); }
.f-count { position:absolute; top:-5px; right:-5px; background:var(--blue); color:white; font-size:10px; font-weight:700; width:18px; height:18px; border-radius:50%; display:flex; align-items:center; justify-content:center; }

/* TABS */
.tabs { display:flex; gap:4px; background:var(--surface); border-radius:10px; padding:4px; margin-bottom:18px; }
.tab-btn { flex:1; padding:7px; font-size:12px; font-weight:600; border:none; border-radius:7px; cursor:pointer; font-family:inherit; color:var(--text2); background:transparent; transition:all .2s; }
.tab-btn.active { background:var(--blue); color:white; }
.tab-content { display:none; }
.tab-content.active { display:block; }

/* SEARCH HIGHLIGHT */
mark { background:rgba(0,141,212,.3); color:var(--blue); border-radius:3px; padding:0 2px; }
</style>
</head>
<body>
<div class="orb orb1"></div>
<div class="orb orb2"></div>

<div class="layout">

<!-- TOPBAR -->
<div class="topbar">
  <div class="logo">
    <div class="logo-icon">S</div>
    <div>
      <div class="logo-text">servinformaciÃ³n</div>
      <div class="logo-sub">Hub Comercial Regional</div>
    </div>
  </div>

  <div class="topbar-search">
    <span>ğŸ”</span>
    <input type="text" id="searchInput" placeholder="Buscar material, paÃ­s, etapaâ€¦" onkeyup="handleSearch(this.value)">
  </div>

  <div class="topbar-right">
    <!-- COUNTRY SELECTOR -->
    <div class="country-selector" onclick="toggleCountryDropdown()">
      <span class="country-flag" id="selectedFlag">ğŸ‡¨ğŸ‡´</span>
      <span class="country-name" id="selectedCountryName">Colombia</span>
      <span class="country-arrow">â–¾</span>
      <div class="country-dropdown" id="countryDropdown">
        <div class="country-region-label">NORTEAMÃ‰RICA</div>
        <div class="country-option active" onclick="selectCountry(event,'ğŸ‡ºğŸ‡¸','United States','USD','$','en')"><span class="flag">ğŸ‡ºğŸ‡¸</span><span class="cname">United States</span><span class="currency">USD $</span></div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡²ğŸ‡½','MÃ©xico','MXN','$')"><span class="flag">ğŸ‡²ğŸ‡½</span><span class="cname">MÃ©xico</span><span class="currency">MXN $</span></div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡¬ğŸ‡¹','Guatemala','GTQ','Q')"><span class="flag">ğŸ‡¬ğŸ‡¹</span><span class="cname">Guatemala</span><span class="currency">GTQ Q</span></div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡­ğŸ‡³','Honduras','HNL','L')"><span class="flag">ğŸ‡­ğŸ‡³</span><span class="cname">Honduras</span><span class="currency">HNL L</span></div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡¸ğŸ‡»','El Salvador','USD','$')"><span class="flag">ğŸ‡¸ğŸ‡»</span><span class="cname">El Salvador</span><span class="currency">USD $</span></div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡³ğŸ‡®','Nicaragua','NIO','C$')"><span class="flag">ğŸ‡³ğŸ‡®</span><span class="cname">Nicaragua</span><span class="currency">NIO C$</span></div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡¨ğŸ‡·','Costa Rica','CRC','â‚¡')"><span class="flag">ğŸ‡¨ğŸ‡·</span><span class="cname">Costa Rica</span><span class="currency">CRC â‚¡</span></div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡µğŸ‡¦','PanamÃ¡','USD','$')"><span class="flag">ğŸ‡µğŸ‡¦</span><span class="cname">PanamÃ¡</span><span class="currency">USD $</span></div>
        <div class="country-region-label">CARIBE</div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡©ğŸ‡´','Rep. Dominicana','DOP','RD$')"><span class="flag">ğŸ‡©ğŸ‡´</span><span class="cname">Rep. Dominicana</span><span class="currency">DOP RD$</span></div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡µğŸ‡·','Puerto Rico','USD','$','en')"><span class="flag">ğŸ‡µğŸ‡·</span><span class="cname">Puerto Rico</span><span class="currency">USD $</span></div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡¯ğŸ‡²','Jamaica','JMD','J$','en')"><span class="flag">ğŸ‡¯ğŸ‡²</span><span class="cname">Jamaica</span><span class="currency">JMD J$</span></div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡¹ğŸ‡¹','Trinidad y Tobago','TTD','TT$','en')"><span class="flag">ğŸ‡¹ğŸ‡¹</span><span class="cname">Trinidad y Tobago</span><span class="currency">TTD TT$</span></div>
        <div class="country-region-label">SUDAMÃ‰RICA NORTE</div>
        <div class="country-option active" onclick="selectCountry(event,'ğŸ‡¨ğŸ‡´','Colombia','COP','$')"><span class="flag">ğŸ‡¨ğŸ‡´</span><span class="cname">Colombia</span><span class="currency">COP $</span></div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡»ğŸ‡ª','Venezuela','USD','$')"><span class="flag">ğŸ‡»ğŸ‡ª</span><span class="cname">Venezuela</span><span class="currency">USD $</span></div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡ªğŸ‡¨','Ecuador','USD','$')"><span class="flag">ğŸ‡ªğŸ‡¨</span><span class="cname">Ecuador</span><span class="currency">USD $</span></div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡µğŸ‡ª','PerÃº','PEN','S/')"><span class="flag">ğŸ‡µğŸ‡ª</span><span class="cname">PerÃº</span><span class="currency">PEN S/</span></div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡§ğŸ‡´','Bolivia','BOB','Bs.')"><span class="flag">ğŸ‡§ğŸ‡´</span><span class="cname">Bolivia</span><span class="currency">BOB Bs.</span></div>
        <div class="country-region-label">SUDAMÃ‰RICA SUR</div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡§ğŸ‡·','Brasil','BRL','R$','pt')"><span class="flag">ğŸ‡§ğŸ‡·</span><span class="cname">Brasil</span><span class="currency">BRL R$</span></div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡¦ğŸ‡·','Argentina','ARS','$')"><span class="flag">ğŸ‡¦ğŸ‡·</span><span class="cname">Argentina</span><span class="currency">ARS $</span></div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡¨ğŸ‡±','Chile','CLP','$')"><span class="flag">ğŸ‡¨ğŸ‡±</span><span class="cname">Chile</span><span class="currency">CLP $</span></div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡ºğŸ‡¾','Uruguay','UYU','$U')"><span class="flag">ğŸ‡ºğŸ‡¾</span><span class="cname">Uruguay</span><span class="currency">UYU $U</span></div>
        <div class="country-option" onclick="selectCountry(event,'ğŸ‡µğŸ‡¾','Paraguay','PYG','â‚²')"><span class="flag">ğŸ‡µğŸ‡¾</span><span class="cname">Paraguay</span><span class="currency">PYG â‚²</span></div>
      </div>
    </div>

    <!-- LANGUAGE TOGGLE -->
    <div class="lang-toggle">
      <button class="lang-btn active" id="btnEs" onclick="setLang('es')">ES</button>
      <button class="lang-btn" id="btnEn" onclick="setLang('en')">EN</button>
      <button class="lang-btn" id="btnPt" onclick="setLang('pt')">PT</button>
    </div>

    <div class="hs-badge"><div class="hs-dot"></div>HubSpot Â· 12 deals</div>
    <div class="avatar">JS</div>
  </div>
</div>

<!-- SIDEBAR -->
<div class="sidebar">
  <div class="sidebar-section">
    <div class="sidebar-label" data-i18n="nav">NavegaciÃ³n</div>
    <div class="sidebar-item active" onclick="showPage('inicio',this)"><div class="s-icon ic-blue">ğŸ </div><span data-i18n="home">Inicio</span></div>
    <div class="sidebar-item" onclick="showPage('regional',this)"><div class="s-icon ic-purple">ğŸŒ</div><span data-i18n="regional">Vista Regional</span><div class="sbadge blue">21</div></div>
    <div class="sidebar-item" onclick="showPage('materiales',this)"><div class="s-icon ic-blue">ğŸ“</div><span data-i18n="materials">Materiales</span><div class="sbadge blue">47</div></div>
    <div class="sidebar-item" onclick="showPage('precios',this)"><div class="s-icon ic-green">ğŸ’°</div><span data-i18n="prices">Precios por moneda</span></div>
    <div class="sidebar-item" onclick="showPage('regulacion',this)"><div class="s-icon ic-purple">âš–ï¸</div><span data-i18n="regulation">RegulaciÃ³n legal</span><div class="sbadge">21</div></div>
    <div class="sidebar-item" onclick="showPage('modismos',this)"><div class="s-icon ic-green">ğŸ’¬</div><span data-i18n="idioms">Modismos regionales</span></div>
    <div class="sidebar-item" onclick="showPage('funnel',this)"><div class="s-icon ic-red">ğŸ¯</div><span data-i18n="funnel">Por etapa del funnel</span></div>
    <div class="sidebar-item" onclick="showPage('hubspot',this)"><div class="s-icon ic-orange">ğŸ”—</div><span data-i18n="hubspot">HubSpot CRM</span><div class="sbadge">3</div></div>
  </div>
  <div class="sidebar-section">
    <div class="sidebar-label">Regiones</div>
    <div class="sidebar-item" onclick="filterRegion('norteamerica')"><div class="s-icon ic-blue">ğŸŒ</div>NorteamÃ©rica + Caribe</div>
    <div class="sidebar-item" onclick="filterRegion('sur')"><div class="s-icon ic-blue">ğŸŒ</div>SudamÃ©rica Norte</div>
    <div class="sidebar-item" onclick="filterRegion('cono')"><div class="s-icon ic-blue">ğŸŒ</div>Cono Sur + Brasil</div>
    <div class="sidebar-item" onclick="filterRegion('usa')"><div class="s-icon ic-blue">ğŸ‡ºğŸ‡¸</div>United States</div>
  </div>
  <div class="sidebar-section">
    <div class="sidebar-label">Config</div>
    <div class="sidebar-item"><div class="s-icon ic-blue">ğŸ¨</div>Manual de marca</div>
    <div class="sidebar-item"><div class="s-icon ic-blue">âš™ï¸</div>Permisos y roles</div>
    <div class="sidebar-item"><div class="s-icon ic-orange">ğŸ“Š</div>Analytics de uso</div>
  </div>
</div>

<!-- MAIN -->
<div class="main">

  <!-- INICIO -->
  <div class="page active" id="page-inicio">
    <div class="page-title" id="welcomeTitle">Bienvenido, <span>JuliÃ¡n</span> ğŸ‘‹</div>
    <div class="page-subtitle" id="welcomeSub">Hub Comercial Regional Â· 21 paÃ­ses Â· Latam & EE.UU.</div>

    <div class="ver-banner">
      <div class="ver-banner-left">
        <div class="ver-dot"></div>
        <div>
          <div class="ver-text">ğŸ“Œ <span data-i18n="ver_active">Versiones vigentes â€” Todas las monedas actualizadas</span></div>
          <div class="ver-sub">Feb 26, 2026 Â· 9:15 AM Â· <span id="currentCountryBanner">Colombia â€” COP</span></div>
        </div>
      </div>
      <button class="ver-btn" onclick="showPage('precios',document.querySelector('[onclick*=precios]'))">Ver precios â†’</button>
    </div>

    <div class="stats-row">
      <div class="stat-card"><div class="stat-icon">ğŸŒ</div><div class="stat-label">PaÃ­ses activos</div><div class="stat-value">21 <span>paÃ­ses</span></div><div class="stat-change">â†‘ 4 regiones</div></div>
      <div class="stat-card red"><div class="stat-icon">ğŸ’±</div><div class="stat-label">Monedas configuradas</div><div class="stat-value">16 <span>divisas</span></div><div class="stat-change">â†‘ USD base + 15</div></div>
      <div class="stat-card"><div class="stat-icon">ğŸ“</div><div class="stat-label">Materiales activos</div><div class="stat-value">47 <span>docs</span></div><div class="stat-change">â†‘ 3 nuevos</div></div>
      <div class="stat-card"><div class="stat-icon">âš–ï¸</div><div class="stat-label">Marcos regulatorios</div><div class="stat-value">21 <span>paÃ­ses</span></div><div class="stat-change">â†‘ Actualizados Q1</div></div>
    </div>

    <!-- COUNTRY BANNER -->
    <div class="country-banner" id="countryBanner">
      <div class="cb-flag" id="cb-flag">ğŸ‡¨ğŸ‡´</div>
      <div class="cb-info">
        <div class="cb-title" id="cb-title">Colombia â€” COP $</div>
        <div class="cb-sub" id="cb-sub">Moneda local Â· Tasa TRM: $4,180 por USD</div>
        <div class="cb-tags" id="cb-tags">
          <span class="cb-tag tag-blue">LocalizaciÃ³n Inteligente</span>
          <span class="cb-tag tag-green">Ley 1581/2012 Datos</span>
          <span class="cb-tag tag-orange">Modismos CO activos</span>
          <span class="cb-tag tag-red">ResoluciÃ³n RNDC Transporte</span>
        </div>
      </div>
    </div>

    <div class="two-col">
      <div>
        <div class="section-title">ğŸ“‚ Materiales mÃ¡s usados</div>
        <div class="cards-grid" id="quick-cards"></div>
      </div>
      <div>
        <div class="section-title">ğŸ“Š Actividad reciente</div>
        <div class="panel">
          <div class="panel-body">
            <div class="act-item"><div class="act-dot" style="background:#4ade80"></div><div><div class="act-text"><strong>MarÃ­a LÃ³pez (CO)</strong> descargÃ³ "Propuesta Enterprise v4" para Bancolombia</div><div class="act-time">Hace 12 min</div></div></div>
            <div class="act-item"><div class="act-dot" style="background:var(--blue)"></div><div><div class="act-text"><strong>Carlos Rueda (MX)</strong> actualizÃ³ "Lista precios MXN Q1 2026" â€” nueva versiÃ³n</div><div class="act-time">Hace 1h</div></div></div>
            <div class="act-item"><div class="act-dot" style="background:var(--red)"></div><div><div class="act-text"><strong>HubSpot</strong> Â· Deal "Grupo Ã‰xito CO" avanzÃ³ a NegociaciÃ³n â€” COP 95M</div><div class="act-time">Hace 2h</div></div></div>
            <div class="act-item"><div class="act-dot" style="background:#fb923c"></div><div><div class="act-text"><strong>Ana Torres (PE)</strong> usÃ³ IA para generar speech en S/ Soles para cliente Lima</div><div class="act-time">Hace 3h</div></div></div>
            <div class="act-item"><div class="act-dot" style="background:#a78bfa"></div><div><div class="act-text"><strong>John Smith (US)</strong> descargÃ³ "Enterprise Proposal v4 â€” English" para FedEx</div><div class="act-time">Hace 4h</div></div></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- VISTA REGIONAL -->
  <div class="page" id="page-regional">
    <div class="page-title">Vista <span>Regional</span> ğŸŒ</div>
    <div class="page-subtitle">Estado de cobertura y materiales por paÃ­s Â· 21 paÃ­ses</div>
    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:10px;">
      <!-- JS rendered -->
    </div>
    <div id="regional-grid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(175px,1fr));gap:10px;"></div>
  </div>

  <!-- MATERIALES -->
  <div class="page" id="page-materiales">
    <div class="page-title">Materiales <span>Comerciales</span></div>
    <div class="page-subtitle">47 documentos activos Â· Regionalizados por paÃ­s y etapa</div>
    <div class="tabs">
      <button class="tab-btn active" onclick="setMatTab(this,'tab-todos')">Todos</button>
      <button class="tab-btn" onclick="setMatTab(this,'tab-latam')">Latam ES</button>
      <button class="tab-btn" onclick="setMatTab(this,'tab-br')">Brasil PT</button>
      <button class="tab-btn" onclick="setMatTab(this,'tab-usa')">USA EN</button>
    </div>
    <div class="tab-content active" id="tab-todos"><div class="cards-grid" id="all-cards"></div></div>
    <div class="tab-content" id="tab-latam"><div class="cards-grid" id="cards-latam"></div></div>
    <div class="tab-content" id="tab-br"><div class="cards-grid" id="cards-br"></div></div>
    <div class="tab-content" id="tab-usa"><div class="cards-grid" id="cards-usa"></div></div>
  </div>

  <!-- PRECIOS -->
  <div class="page" id="page-precios">
    <div class="page-title">Lista de <span>Precios por Moneda</span> ğŸ’°</div>
    <div class="page-subtitle">Precios base en USD Â· Convertidos automÃ¡ticamente por TRM vigente Â· Q1 2026</div>
    <div class="panel" style="margin-bottom:18px">
      <div class="panel-header"><span class="panel-icon">ğŸ’±</span><div><div class="panel-title">Tasas de cambio vigentes â€” Feb 2026</div><div class="panel-sub">Base: 1 USD Â· ActualizaciÃ³n manual recomendada cada mes</div></div></div>
      <div class="panel-body">
        <table class="price-table" id="fx-table">
          <tr><th>PaÃ­s</th><th>Moneda</th><th>CÃ³digo</th><th>TRM vs USD</th><th>Precio Plan BÃ¡sico</th><th>Precio Plan Enterprise</th></tr>
        </table>
      </div>
    </div>
    <div class="section-title">ğŸ“‹ Notas por paÃ­s</div>
    <div class="panel">
      <div class="panel-body" style="font-size:12.5px;color:var(--text2);line-height:1.8">
        <p>ğŸ‡¦ğŸ‡· <strong>Argentina:</strong> Cotizar siempre en USD y aclarar en contrato. Alta volatilidad cambiaria. Verificar tipo de cambio oficial vs. blue antes de enviar propuesta.</p>
        <p style="margin-top:8px">ğŸ‡§ğŸ‡· <strong>Brasil:</strong> Incluir CNPJ en facturas. Los precios deben indicar si incluyen ICMS. Propuestas en R$ con nota de variaciÃ³n cambiaria.</p>
        <p style="margin-top:8px">ğŸ‡ºğŸ‡¸ <strong>USA:</strong> Pricing in USD only. Include applicable state taxes note. Contracts in English with governing law clause (Florida or applicable state).</p>
        <p style="margin-top:8px">ğŸ‡ªğŸ‡¨ ğŸ‡µğŸ‡¦ ğŸ‡¸ğŸ‡» <strong>PaÃ­ses dolarizados:</strong> Usar precio USD directamente, sin conversiÃ³n.</p>
        <p style="margin-top:8px">ğŸ‡¨ğŸ‡± <strong>Chile:</strong> Precio en UF (Unidad de Fomento) para contratos largos. Verificar UF del dÃ­a en CMF Chile.</p>
      </div>
    </div>
  </div>

  <!-- REGULACIÃ“N -->
  <div class="page" id="page-regulacion">
    <div class="page-title">RegulaciÃ³n <span>Legal por PaÃ­s</span> âš–ï¸</div>
    <div class="page-subtitle">Marco normativo clave para contratos, datos y localizaciÃ³n Â· Actualizado Q1 2026</div>
    <div class="panel">
      <div class="panel-header reg"><span class="panel-icon">âš–ï¸</span><div><div class="panel-title">Normativas relevantes para ventas de LocalizaciÃ³n Inteligente</div><div class="panel-sub">Haz clic en cada paÃ­s para expandir detalles</div></div></div>
      <div class="panel-body" id="reg-list"></div>
    </div>
  </div>

  <!-- MODISMOS -->
  <div class="page" id="page-modismos">
    <div class="page-title">Modismos y <span>Lenguaje Comercial</span> ğŸ’¬</div>
    <div class="page-subtitle">Vocabulario, frases y tono recomendado por regiÃ³n para propuestas, speeches y emails</div>
    <div id="idioms-grid"></div>
  </div>

  <!-- FUNNEL -->
  <div class="page" id="page-funnel">
    <div class="page-title">Materiales por <span>Etapa del Funnel</span></div>
    <div class="page-subtitle">Selecciona la etapa en la que estÃ¡s con tu prospecto</div>
    <div class="funnel-row">
      <div class="f-stage active" onclick="setFunnel(this,'ğŸ“¡','ProspecciÃ³n','Scripts de primer contacto, presentaciÃ³n corporativa y perfil de cliente ideal.',8)"><div class="f-icon">ğŸ“¡</div><div class="f-name">ProspecciÃ³n</div><div class="f-count">8</div></div>
      <div class="f-stage" onclick="setFunnel(this,'ğŸ”','CalificaciÃ³n','Preguntas de descubrimiento, guÃ­as BANT y perfiles de ICP.',6)"><div class="f-icon">ğŸ”</div><div class="f-name">CalificaciÃ³n</div><div class="f-count">6</div></div>
      <div class="f-stage" onclick="setFunnel(this,'ğŸ“‹','Propuesta','Plantillas de propuesta por segmento y moneda, lista de precios y calculadora ROI.',9)"><div class="f-icon">ğŸ“‹</div><div class="f-name">Propuesta</div><div class="f-count">9</div></div>
      <div class="f-stage" onclick="setFunnel(this,'ğŸ›¡ï¸','Objeciones','Banco de objeciones, comparativo vs. competencia y argumentarios por industria.',7)"><div class="f-icon">ğŸ›¡ï¸</div><div class="f-name">Objeciones</div><div class="f-count">7</div></div>
      <div class="f-stage" onclick="setFunnel(this,'âœ…','Cierre','Plantillas de contrato por paÃ­s, condiciones comerciales y scripts de cierre.',5)"><div class="f-icon">âœ…</div><div class="f-name">Cierre</div><div class="f-count">5</div></div>
      <div class="f-stage" onclick="setFunnel(this,'â­','Post-venta','Casos de Ã©xito, testimonios, NPS y scripts de reactivaciÃ³n.',12)"><div class="f-icon">â­</div><div class="f-name">Post-venta</div><div class="f-count">12</div></div>
    </div>
    <div class="panel" id="funnel-panel">
      <div class="panel-header" id="funnel-ph"></div>
      <div class="panel-body"><p id="funnel-desc" style="font-size:13px;color:var(--text2);margin-bottom:14px"></p><div class="cards-grid" id="funnel-cards"></div></div>
    </div>
  </div>

  <!-- HUBSPOT -->
  <div class="page" id="page-hubspot">
    <div class="page-title">IntegraciÃ³n <span>HubSpot CRM</span> ğŸ”—</div>
    <div class="page-subtitle">Deals activos por regiÃ³n Â· Material sugerido por etapa</div>
    <div class="panel"><div class="panel-header hs"><div class="hs-logo" style="width:26px;height:26px;background:#ff7a00;border-radius:7px;display:flex;align-items:center;justify-content:center">ğŸ§¡</div><div style="margin-left:10px"><div class="panel-title">Pipeline Comercial Â· 21 paÃ­ses</div><div class="panel-sub">12 deals activos Â· Sync: hace 5 min</div></div></div><div class="panel-body" id="hs-deals"></div></div>
    <div class="section-title">ğŸ’¡ Material sugerido por IA</div>
    <div class="cards-grid" id="hs-suggested"></div>
  </div>

</div><!-- /main -->

<!-- CHAT -->
<div class="chat-panel">
  <div class="chat-header">
    <div class="chat-ai-av">ğŸ¤–</div>
    <div>
      <div class="chat-name" id="chatName">Asistente Comercial IA</div>
      <div class="chat-status">â— Gemini 3.1 Pro Â· <span id="chatCountry">Colombia</span></div>
    </div>
    <div class="chat-lang-badge" id="chatLangBadge">ES ğŸ‡¨ğŸ‡´</div>
  </div>

  <div class="chat-messages" id="chatMessages">
    <div class="msg msg-ai">
      <div class="msg-av av-ai">S</div>
      <div>
        <div class="msg-bubble">Â¡Hola! Soy tu asistente comercial regional de ServinformaciÃ³n ğŸ‘‹<br><br>Tengo contexto de <strong>21 paÃ­ses</strong>: precios en moneda local, regulaciones vigentes y modismos comerciales por regiÃ³n.<br><br>Â¿Para quÃ© paÃ­s y etapa necesitas ayuda hoy?</div>
        <div class="msg-time">Ahora</div>
      </div>
    </div>
  </div>

  <div class="quick-chips" id="quickChips">
    <button class="chip" onclick="sendChip(this.textContent)">ğŸ’° Precio en MXN</button>
    <button class="chip" onclick="sendChip(this.textContent)">ğŸ›¡ï¸ ObjeciÃ³n precio</button>
    <button class="chip" onclick="sendChip(this.textContent)">âš–ï¸ RegulaciÃ³n Brasil</button>
    <button class="chip" onclick="sendChip(this.textContent)">ğŸ“‹ Propuesta USA EN</button>
    <button class="chip" onclick="sendChip(this.textContent)">ğŸ’¬ Speech Argentina</button>
  </div>

  <div class="chat-input-area">
    <textarea class="chat-input" id="chatInput" placeholder="Escribe tu consulta (cualquier paÃ­s o idioma)â€¦" rows="1"
      onkeydown="if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();sendMessage()}"
      oninput="this.style.height='auto';this.style.height=this.scrollHeight+'px'"></textarea>
    <button class="send-btn" onclick="sendMessage()">â¤</button>
  </div>
</div>

</div><!-- /layout -->

<script>
// â”€â”€â”€ DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const COUNTRIES = [
  { flag:'ğŸ‡ºğŸ‡¸', name:'United States', currency:'USD', symbol:'$', trm:1, lang:'en', region:'norteamerica' },
  { flag:'ğŸ‡²ğŸ‡½', name:'MÃ©xico', currency:'MXN', symbol:'$', trm:17.2, lang:'es', region:'norteamerica' },
  { flag:'ğŸ‡¬ğŸ‡¹', name:'Guatemala', currency:'GTQ', symbol:'Q', trm:7.8, lang:'es', region:'norteamerica' },
  { flag:'ğŸ‡­ğŸ‡³', name:'Honduras', currency:'HNL', symbol:'L', trm:24.8, lang:'es', region:'norteamerica' },
  { flag:'ğŸ‡¸ğŸ‡»', name:'El Salvador', currency:'USD', symbol:'$', trm:1, lang:'es', region:'norteamerica' },
  { flag:'ğŸ‡³ğŸ‡®', name:'Nicaragua', currency:'NIO', symbol:'C$', trm:36.6, lang:'es', region:'norteamerica' },
  { flag:'ğŸ‡¨ğŸ‡·', name:'Costa Rica', currency:'CRC', symbol:'â‚¡', trm:528, lang:'es', region:'norteamerica' },
  { flag:'ğŸ‡µğŸ‡¦', name:'PanamÃ¡', currency:'USD', symbol:'$', trm:1, lang:'es', region:'norteamerica' },
  { flag:'ğŸ‡©ğŸ‡´', name:'Rep. Dominicana', currency:'DOP', symbol:'RD$', trm:58.5, lang:'es', region:'caribe' },
  { flag:'ğŸ‡µğŸ‡·', name:'Puerto Rico', currency:'USD', symbol:'$', trm:1, lang:'en', region:'caribe' },
  { flag:'ğŸ‡¯ğŸ‡²', name:'Jamaica', currency:'JMD', symbol:'J$', trm:157, lang:'en', region:'caribe' },
  { flag:'ğŸ‡¹ğŸ‡¹', name:'Trinidad y Tobago', currency:'TTD', symbol:'TT$', trm:6.8, lang:'en', region:'caribe' },
  { flag:'ğŸ‡¨ğŸ‡´', name:'Colombia', currency:'COP', symbol:'$', trm:4180, lang:'es', region:'sur' },
  { flag:'ğŸ‡»ğŸ‡ª', name:'Venezuela', currency:'USD', symbol:'$', trm:1, lang:'es', region:'sur' },
  { flag:'ğŸ‡ªğŸ‡¨', name:'Ecuador', currency:'USD', symbol:'$', trm:1, lang:'es', region:'sur' },
  { flag:'ğŸ‡µğŸ‡ª', name:'PerÃº', currency:'PEN', symbol:'S/', trm:3.75, lang:'es', region:'sur' },
  { flag:'ğŸ‡§ğŸ‡´', name:'Bolivia', currency:'BOB', symbol:'Bs.', trm:6.92, lang:'es', region:'sur' },
  { flag:'ğŸ‡§ğŸ‡·', name:'Brasil', currency:'BRL', symbol:'R$', trm:5.05, lang:'pt', region:'cono' },
  { flag:'ğŸ‡¦ğŸ‡·', name:'Argentina', currency:'ARS', symbol:'$', trm:1020, lang:'es', region:'cono' },
  { flag:'ğŸ‡¨ğŸ‡±', name:'Chile', currency:'CLP', symbol:'$', trm:940, lang:'es', region:'cono' },
  { flag:'ğŸ‡ºğŸ‡¾', name:'Uruguay', currency:'UYU', symbol:'$U', trm:38.7, lang:'es', region:'cono' },
  { flag:'ğŸ‡µğŸ‡¾', name:'Paraguay', currency:'PYG', symbol:'â‚²', trm:7350, lang:'es', region:'cono' },
];

// USD base prices
const PRICES_USD = { basic: 299, pro: 699, enterprise: 1499 };

const REGULATIONS = [
  { flag:'ğŸ‡¨ğŸ‡´', country:'Colombia', status:'ok', norm:'Ley 1581/2012 (ProtecciÃ³n de Datos), Ley 1273/2009 (Delitos InformÃ¡ticos), ResoluciÃ³n RNDC (Transporte)', detail:'Los contratos deben incluir clÃ¡usula de tratamiento de datos personales. El sistema de localizaciÃ³n debe estar registrado ante la SIC. Para flotas de transporte, verificar alineaciÃ³n con RNDC y MinTransporte.' },
  { flag:'ğŸ‡²ğŸ‡½', country:'MÃ©xico', status:'ok', norm:'LFPDPPP (Ley Federal ProtecciÃ³n Datos), NOM-012 (Transporte), Ley Federal Telecomunicaciones', detail:'Aviso de privacidad obligatorio en contratos. El tratamiento de datos de geolocalizaciÃ³n requiere consentimiento expreso. Para flotas, revisar requisitos de la SCT.' },
  { flag:'ğŸ‡§ğŸ‡·', country:'Brasil', status:'warn', norm:'LGPD (Lei Geral de ProteÃ§Ã£o de Dados), ANTT (AgÃªncia Nacional de Transportes)', detail:'La LGPD es equivalente al GDPR europeo. Requiere DPO (Encarregado) designado. Los contratos deben estar en portuguÃ©s. GeolocalizaciÃ³n requiere consentimiento explÃ­cito. Alta sensibilidad regulatoria.' },
  { flag:'ğŸ‡¦ğŸ‡·', country:'Argentina', status:'warn', norm:'Ley 25.326 (ProtecciÃ³n Datos Personales), Ley 27.078 (Argentina Digital)', detail:'Registro obligatorio de bases de datos en AAIP. Contratos en ARS o USD con clÃ¡usula de ajuste. Alta volatilidad cambiaria â€” verificar antes de enviar propuesta final.' },
  { flag:'ğŸ‡µğŸ‡ª', country:'PerÃº', status:'ok', norm:'Ley 29733 (ProtecciÃ³n Datos), Ley 27181 (TrÃ¡nsito Terrestre), DS 016-2009-MTC', detail:'El MINEDU regula datos de menores. Para flotas de transporte, verificar requisitos del MTC. Contratos en S/ con nota de tipo de cambio.' },
  { flag:'ğŸ‡¨ğŸ‡±', country:'Chile', status:'ok', norm:'Ley 19.628 (Datos Personales) â€” en proceso nueva Ley (similar GDPR)', detail:'Chile estÃ¡ en proceso de actualizar su ley de datos. Para contratos largos usar UF (Unidad de Fomento). El Ministerio de Transportes regula flotas.' },
  { flag:'ğŸ‡ºğŸ‡¸', country:'United States', status:'info', norm:'CCPA (California), COPPA, FCRA, State-level Privacy Laws, DOT Regulations', detail:'Privacy laws vary by state. CCPA applies if operating in California. For fleet tracking, DOT FMCSA regulations apply. Contracts in English; governing law clause essential.' },
  { flag:'ğŸ‡ªğŸ‡¨', country:'Ecuador', status:'ok', norm:'Ley OrgÃ¡nica de ProtecciÃ³n de Datos (LOPDP 2021), LOTTTSV (Transporte)', detail:'LOPDP vigente desde 2021. Contratos en USD (paÃ­s dolarizado). Para flotas, verificar ANT (Agencia Nacional de TrÃ¡nsito).' },
  { flag:'ğŸ‡©ğŸ‡´', country:'Rep. Dominicana', status:'ok', norm:'Ley 172-13 (ProtecciÃ³n Datos), Ley 256-16 (Comercio ElectrÃ³nico)', detail:'Marco regulatorio estable. Contratos en DOP o USD. Para transporte, verificar con INTRANT.' },
  { flag:'ğŸ‡µğŸ‡¦', country:'PanamÃ¡', status:'ok', norm:'Ley 81/2019 (ProtecciÃ³n Datos), Ley 14/2006 (Comercio ElectrÃ³nico)', detail:'PaÃ­s dolarizado, contratos en USD. Ley 81 de 2019 regula datos personales. Hub financiero â€” alta sensibilidad a privacidad.' },
  { flag:'ğŸ‡ºğŸ‡¾', country:'Uruguay', status:'ok', norm:'Ley 18.331 (ProtecciÃ³n Datos) â€” certificaciÃ³n adecuada UE', detail:'Uruguay tiene el marco de datos mÃ¡s robusto de LATAM (equivalente europeo). Contratos en UYU con nota de tipo de cambio.' },
  { flag:'ğŸ‡µğŸ‡¾', country:'Paraguay', status:'info', norm:'Ley 1682/2001 (Datos Personales), en proceso actualizaciÃ³n', detail:'Marco en actualizaciÃ³n. Contratos en PYG o USD. Para transporte, verificar DINATRAN.' },
  { flag:'ğŸ‡§ğŸ‡´', country:'Bolivia', status:'info', norm:'Ley 164/2011 (Telecomunicaciones), proyecto nueva ley datos', detail:'Marco de datos en desarrollo. Contratos en BOB. Verificar requisitos ABC (Autoridad de RegulaciÃ³n y FiscalizaciÃ³n de Telecomunicaciones).' },
  { flag:'ğŸ‡¬ğŸ‡¹', country:'Guatemala', status:'ok', norm:'Acuerdo Gubernativo 424-2011 (Datos), Reglamento Transporte', detail:'Marco bÃ¡sico de datos. Contratos en GTQ o USD. Para transporte, verificar con el Ministerio de Comunicaciones.' },
  { flag:'ğŸ‡¨ğŸ‡·', country:'Costa Rica', status:'ok', norm:'Ley 8968 (ProtecciÃ³n Datos), Ley 9078 (TrÃ¡nsito)', detail:'Marco sÃ³lido de privacidad. Contratos en CRC o USD. PRODHAB es la autoridad de datos.' },
];

const IDIOMS = [
  { flag:'ğŸ‡¨ğŸ‡´', country:'Colombia', region:'SudamÃ©rica Norte', use:['Â«SoluciÃ³n de puntaÂ»','Â«Â¿CÃ³mo le queda el ojo?Â» (Â¿quÃ© opina?)','Â«Le ponemos la fichaÂ» (nos comprometemos)','Â«A todaÂ» (excelente)','Tratar de Â«ustedÂ» siempre al inicio'], avoid:['Â«PrecioÂ» solo â€” siempre Â«inversiÃ³nÂ»','Jerga muy informal al inicio','Tuteo con directivos senior','Comparaciones directas con competidores por nombre'] },
  { flag:'ğŸ‡²ğŸ‡½', country:'MÃ©xico', region:'NorteamÃ©rica', use:['Â«EstÃ¡ padrÃ­simoÂ» (muy bueno â€” en confianza)','Â«AhoritaÂ» = puede ser ya o despuÃ©s, especificar','Â«Echarle ganasÂ» (compromiso)','Â«ÃndaleÂ» (de acuerdo)','Tratar de Â«ustedÂ» hasta que den confianza'], avoid:['Â«AhoritaÂ» sin especificar tiempo','Asumir Â«maÃ±anaÂ» = maÃ±ana','Hablar de precio sin antes establecer relaciÃ³n','Apresurarse al cierre en primera reuniÃ³n'] },
  { flag:'ğŸ‡§ğŸ‡·', country:'Brasil', region:'Cono Sur + Brasil', use:['Â«SoluÃ§Ã£o inteligenteÂ» (en PT)','Â«Vamos nessa!Â» (Â¡vamos!)','Â«Fica tranquiloÂ» (no te preocupes)','Â«Que bacana!Â» (Â¡quÃ© genial!)','Propuestas siempre en portuguÃ©s'], avoid:['Presentar en espaÃ±ol â€” obligatorio traducir','Mezclar espaÃ±ol y portuguÃ©s','Ser muy directo en primeras reuniones','Apresurar el proceso de decisiÃ³n'] },
  { flag:'ğŸ‡¦ğŸ‡·', country:'Argentina', region:'Cono Sur', use:['Â«BÃ¡rbaroÂ» (excelente)','Â«DaleÂ» (de acuerdo)','Â«Te mando el detalleÂ» (envÃ­o informaciÃ³n)','Tratar de Â«vosÂ» (no Â«ustedÂ» ni Â«tÃºÂ»)','Ser directo y tÃ©cnico â€” valoran la solidez'], avoid:['Â«TÃºÂ» â€” usar Â«vosÂ»','Precios en ARS sin cotizar en USD','Prometer ROI sin datos concretos','Asumir estabilidad de precios a largo plazo'] },
  { flag:'ğŸ‡¨ğŸ‡±', country:'Chile', region:'Cono Sur', use:['Â«Cachai?Â» (Â¿entiendes? â€” en confianza)','Â«Al tiroÂ» (inmediatamente)','Â«BacÃ¡nÂ» (genial)','Ser formal y puntual','Propuestas muy detalladas y tÃ©cnicas'], avoid:['Â«FomeÂ» (aburrido) â€” el opuesto de lo que buscas','Informalidad prematura','Llegar tarde a reuniones','Propuestas sin mÃ©tricas claras'] },
  { flag:'ğŸ‡ºğŸ‡¸', country:'United States', region:'NorteamÃ©rica', use:['Â«Smart fleet solutionÂ»','Â«ROI-driven approachÂ»','Â«Scalable platformÂ»','Â«Let\'s set up a quick callÂ»','Be direct and time-conscious'], avoid:['Long proposals without executive summary','Vague pricing (always show clear tiers)','Slow follow-up (24h max)','Mixing Spanish in formal proposals'] },
  { flag:'ğŸ‡µğŸ‡ª', country:'PerÃº', region:'SudamÃ©rica Norte', use:['Â«De primeraÂ» (excelente)','Â«ChÃ©vereÂ» (genial)','Â«CausaÂ» (amigo â€” en confianza)','Formalidad alta en Lima, mÃ¡s cercanÃ­a en provincias'], avoid:['Tuteo inmediato','Comparar con competidores locales','Propuestas genÃ©ricas sin adaptar al sector minero/logÃ­stico'] },
  { flag:'ğŸ‡ªğŸ‡¨', country:'Ecuador', region:'SudamÃ©rica Norte', use:['Â«ChevereÂ» (genial)','Â«BacÃ¡nÂ» (excelente)','Â«De leyÂ» (de seguro / claro que sÃ­)','Formalidad alta en Quito','PaÃ­s dolarizado â€” cotizar en USD directamente'], avoid:['Tuteo inmediato con ejecutivos senior','Propuestas sin enfoque en ROI claro','Asumir que Guayaquil y Quito tienen el mismo estilo'] },
];

const MATERIALS = [
  { id:1,title:'PresentaciÃ³n Corporativa',icon:'ğŸ“Š',thumb:'t-blue',stage:'ProspecciÃ³n',sp:'sp-blue',ver:'v4',date:'Feb 2026',desc:'Deck completo 24 slides',lang:'es',region:'all' },
  { id:2,title:'Corporate Presentation â€” EN',icon:'ğŸ“Š',thumb:'t-blue',stage:'ProspecciÃ³n',sp:'sp-blue',ver:'v4',date:'Feb 2026',desc:'Full deck 24 slides',lang:'en',region:'usa' },
  { id:3,title:'ApresentaÃ§Ã£o Corporativa â€” PT',icon:'ğŸ“Š',thumb:'t-blue',stage:'ProspecciÃ³n',sp:'sp-blue',ver:'v3',date:'Feb 2026',desc:'Deck completo 24 slides PT',lang:'pt',region:'br' },
  { id:4,title:'Propuesta Enterprise Latam',icon:'ğŸ“‹',thumb:'t-red',stage:'Propuesta',sp:'sp-red',ver:'v4',date:'Feb 2026',desc:'Template grandes cuentas ES',lang:'es',region:'latam' },
  { id:5,title:'Enterprise Proposal â€” USA/EN',icon:'ğŸ“‹',thumb:'t-red',stage:'Propuesta',sp:'sp-red',ver:'v4',date:'Feb 2026',desc:'Template for large accounts EN',lang:'en',region:'usa' },
  { id:6,title:'Proposta Enterprise â€” BR',icon:'ğŸ“‹',thumb:'t-red',stage:'Propuesta',sp:'sp-red',ver:'v3',date:'Feb 2026',desc:'Template grandes contas PT',lang:'pt',region:'br' },
  { id:7,title:'Lista de Precios MXN 2026',icon:'ğŸ’°',thumb:'t-green',stage:'Propuesta',sp:'sp-red',ver:'v1',date:'Feb 2026',desc:'Precios en pesos mexicanos',lang:'es',region:'mx', flag:'ğŸ‡²ğŸ‡½' },
  { id:8,title:'Lista de Precios COP 2026',icon:'ğŸ’°',thumb:'t-green',stage:'Propuesta',sp:'sp-red',ver:'v1',date:'Feb 2026',desc:'Precios en pesos colombianos',lang:'es',region:'co', flag:'ğŸ‡¨ğŸ‡´' },
  { id:9,title:'Lista de Precios BRL 2026',icon:'ğŸ’°',thumb:'t-green',stage:'Propuesta',sp:'sp-red',ver:'v1',date:'Feb 2026',desc:'PreÃ§os em reais brasileiros',lang:'pt',region:'br', flag:'ğŸ‡§ğŸ‡·' },
  { id:10,title:'Banco de Objeciones Latam',icon:'ğŸ›¡ï¸',thumb:'t-orange',stage:'Objeciones',sp:'sp-orange',ver:'v5',date:'Feb 2026',desc:'23 objeciones + respuestas',lang:'es',region:'latam' },
  { id:11,title:'Objection Handling â€” USA/EN',icon:'ğŸ›¡ï¸',thumb:'t-orange',stage:'Objeciones',sp:'sp-orange',ver:'v3',date:'Feb 2026',desc:'18 objections with responses',lang:'en',region:'usa' },
  { id:12,title:'Caso de Ã‰xito â€” LogÃ­stica CO',icon:'â­',thumb:'t-green',stage:'Post-venta',sp:'sp-green',ver:'v2',date:'Dic 2025',desc:'ROI 3.2x Â· NPS 94',lang:'es',region:'co', flag:'ğŸ‡¨ğŸ‡´' },
  { id:13,title:'Case Study â€” FedEx USA',icon:'â­',thumb:'t-green',stage:'Post-venta',sp:'sp-green',ver:'v1',date:'Ene 2026',desc:'Fleet ROI 2.8x Â· EN',lang:'en',region:'usa', flag:'ğŸ‡ºğŸ‡¸' },
  { id:14,title:'RegulaciÃ³n Legal por PaÃ­s',icon:'âš–ï¸',thumb:'t-purple',stage:'Cierre',sp:'sp-purple',ver:'v2',date:'Feb 2026',desc:'21 paÃ­ses Â· Marco normativo',lang:'es',region:'all' },
  { id:15,title:'GuÃ­a Modismos Comerciales',icon:'ğŸ’¬',thumb:'t-purple',stage:'ProspecciÃ³n',sp:'sp-blue',ver:'v1',date:'Feb 2026',desc:'8 paÃ­ses Â· Lenguaje y tono',lang:'es',region:'latam' },
  { id:16,title:'Contrato Marco â€” ES Latam',icon:'ğŸ“„',thumb:'t-blue',stage:'Cierre',sp:'sp-green',ver:'v6',date:'Ene 2026',desc:'Aprobado por Legal Â· ES',lang:'es',region:'latam' },
  { id:17,title:'Master Service Agreement â€” EN',icon:'ğŸ“„',thumb:'t-blue',stage:'Cierre',sp:'sp-green',ver:'v4',date:'Ene 2026',desc:'Approved by Legal Â· EN',lang:'en',region:'usa' },
  { id:18,title:'Calculadora ROI â€” Latam',icon:'ğŸ“ˆ',thumb:'t-green',stage:'Propuesta',sp:'sp-red',ver:'v2',date:'Ene 2026',desc:'Excel con moneda configurable',lang:'es',region:'latam' },
];

const HS_DEALS = [
  { av:'BG', name:'Bancolombia', value:'COP 180M', stage:'Propuesta', color:'#4ade80', country:'ğŸ‡¨ğŸ‡´' },
  { av:'EP', name:'EPM MedellÃ­n', value:'COP 240M', stage:'NegociaciÃ³n', color:'#fb923c', country:'ğŸ‡¨ğŸ‡´' },
  { av:'FX', name:'FedEx USA', value:'USD 85K', stage:'Proposal', color:'#4ade80', country:'ğŸ‡ºğŸ‡¸' },
  { av:'AM', name:'Ambev Brasil', value:'BRL 420K', stage:'Proposta', color:'#fb923c', country:'ğŸ‡§ğŸ‡·' },
  { av:'CE', name:'Cemex MÃ©xico', value:'MXN 2.1M', stage:'CalificaciÃ³n', color:'var(--blue)', country:'ğŸ‡²ğŸ‡½' },
];

// â”€â”€â”€ CURRENT STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let currentCountry = COUNTRIES.find(c=>c.name==='Colombia');
let currentLang = 'es';

// â”€â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.addEventListener('DOMContentLoaded', ()=>{
  renderQuickCards();
  renderAllCards();
  renderPriceTable();
  renderRegulations();
  renderIdioms();
  renderHSDeals();
  renderRegionalGrid();
  setFunnel(document.querySelector('.f-stage.active'),'ğŸ“¡','ProspecciÃ³n','Scripts de primer contacto, presentaciÃ³n corporativa y perfil de cliente ideal.',8);
});

function renderQuickCards(){
  document.getElementById('quick-cards').innerHTML = MATERIALS.slice(0,6).map(renderCard).join('');
}
function renderAllCards(){
  document.getElementById('all-cards').innerHTML = MATERIALS.map(renderCard).join('');
  document.getElementById('cards-latam').innerHTML = MATERIALS.filter(m=>m.lang==='es').map(renderCard).join('');
  document.getElementById('cards-br').innerHTML = MATERIALS.filter(m=>m.lang==='pt').map(renderCard).join('');
  document.getElementById('cards-usa').innerHTML = MATERIALS.filter(m=>m.lang==='en').map(renderCard).join('');
  document.getElementById('hs-suggested').innerHTML = MATERIALS.filter(m=>m.stage==='Propuesta').slice(0,4).map(renderCard).join('');
}

function renderCard(m){
  return `<div class="material-card" onclick="alert('ğŸ“„ ${m.title}\\n\\nVersiÃ³n: ${m.ver} â€” ${m.date}\\nIdioma: ${m.lang.toUpperCase()}\\nRegiÃ³n: ${m.region}\\n\\nEn producciÃ³n, abre el documento en Google Drive.')">
    <div class="mc-thumb ${m.thumb}"><span style="font-size:32px">${m.icon}</span><div class="mc-version">${m.ver}</div>${m.flag?`<div class="mc-flag">${m.flag}</div>`:''}</div>
    <div class="mc-body"><div class="mc-title">${m.title}</div><div class="mc-meta">${m.desc} Â· ${m.date}</div></div>
    <div class="mc-footer"><div class="stage-pill ${m.sp}">${m.stage}</div><button class="mc-action" onclick="event.stopPropagation();sendChip('Material: ${m.title}')">ğŸ’¬</button></div>
  </div>`;
}

function renderPriceTable(){
  const rows = COUNTRIES.map(c=>{
    const basic = (PRICES_USD.basic * c.trm).toLocaleString('es-CO',{maximumFractionDigits:0});
    const ent   = (PRICES_USD.enterprise * c.trm).toLocaleString('es-CO',{maximumFractionDigits:0});
    return `<tr>
      <td><div class="country-cell">${c.flag} ${c.name}</div></td>
      <td>${c.currency}</td>
      <td style="color:var(--text2);font-size:11px">${c.currency}</td>
      <td style="color:var(--text2);font-size:11px">${c.trm===1?'=USD':'1 USD = '+c.trm.toLocaleString()}</td>
      <td><span class="price-val">${c.symbol}${basic}</span> <span class="usd-val">/ $${PRICES_USD.basic} USD</span></td>
      <td><span class="price-val">${c.symbol}${ent}</span> <span class="usd-val">/ $${PRICES_USD.enterprise} USD</span></td>
    </tr>`;
  }).join('');
  document.getElementById('fx-table').innerHTML = `<tr><th>PaÃ­s</th><th>Moneda</th><th>CÃ³digo</th><th>TRM</th><th>Plan BÃ¡sico /mes</th><th>Plan Enterprise /mes</th></tr>`+rows;
}

function renderRegulations(){
  document.getElementById('reg-list').innerHTML = REGULATIONS.map((r,i)=>`
    <div class="reg-item">
      <div class="reg-header" onclick="toggleReg(${i})">
        <span style="font-size:20px">${r.flag}</span>
        <span class="reg-title">${r.country}</span>
        <span class="reg-status ${r.status==='ok'?'rs-ok':r.status==='warn'?'rs-warn':'rs-info'}">${r.status==='ok'?'âœ… Estable':r.status==='warn'?'âš ï¸ AtenciÃ³n':'â„¹ï¸ Info'}</span>
      </div>
      <div style="font-size:11px;color:var(--blue);margin:2px 0 6px 30px">${r.norm}</div>
      <div class="reg-body" id="reg-body-${i}">${r.detail}</div>
    </div>`).join('');
}

function toggleReg(i){
  const b = document.getElementById('reg-body-'+i);
  b.classList.toggle('open');
}

function renderIdioms(){
  document.getElementById('idioms-grid').innerHTML = IDIOMS.map(id=>`
    <div class="idiom-card">
      <div class="idiom-header">
        <span class="idiom-flag">${id.flag}</span>
        <div><div class="idiom-country">${id.country}</div><div class="idiom-region">${id.region}</div></div>
      </div>
      <div class="idiom-row">
        <div class="idiom-box">
          <div class="idiom-box-label use">âœ… Usa en propuestas / speech</div>
          ${id.use.map(u=>`<div class="idiom-item">${u}</div>`).join('')}
        </div>
        <div class="idiom-box">
          <div class="idiom-box-label avoid">âŒ Evita / Ten cuidado</div>
          ${id.avoid.map(a=>`<div class="idiom-item">${a}</div>`).join('')}
        </div>
      </div>
    </div>`).join('');
}

function renderHSDeals(){
  document.getElementById('hs-deals').innerHTML = HS_DEALS.map(d=>`
    <div class="deal-item">
      <div class="deal-av">${d.av}</div>
      <div class="deal-info"><div class="deal-name">${d.country} ${d.name}</div><div class="deal-co">Etapa: ${d.stage}</div></div>
      <div class="deal-stage" style="background:${d.color}22;color:${d.color}">${d.stage}</div>
      <div class="deal-val">${d.value}</div>
    </div>`).join('');
}

function renderRegionalGrid(){
  document.getElementById('regional-grid').innerHTML = COUNTRIES.map(c=>`
    <div style="background:var(--surface);border:1px solid var(--border);border-radius:11px;padding:14px;cursor:pointer;transition:all .2s" onclick="selectCountryByName('${c.name}')" onmouseover="this.style.borderColor='var(--blue)'" onmouseout="this.style.borderColor='var(--border)'">
      <div style="font-size:24px;margin-bottom:6px">${c.flag}</div>
      <div style="font-size:12px;font-weight:700;color:white;margin-bottom:2px">${c.name}</div>
      <div style="font-size:10px;color:var(--text2)">${c.currency} ${c.symbol} Â· ${c.lang.toUpperCase()}</div>
      <div style="margin-top:8px;display:flex;gap:4px;flex-wrap:wrap">
        <span style="font-size:9px;background:rgba(0,141,212,.12);color:var(--blue);padding:2px 6px;border-radius:4px">ğŸ’° Precios</span>
        <span style="font-size:9px;background:rgba(140,82,255,.12);color:#a78bfa;padding:2px 6px;border-radius:4px">âš–ï¸ Reg.</span>
      </div>
    </div>`).join('');
}

// â”€â”€â”€ COUNTRY SELECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toggleCountryDropdown(){
  document.getElementById('countryDropdown').classList.toggle('open');
}
document.addEventListener('click', e=>{
  if(!e.target.closest('.country-selector')) document.getElementById('countryDropdown').classList.remove('open');
});

function selectCountry(e, flag, name, currency, symbol, lang){
  e.stopPropagation();
  currentCountry = COUNTRIES.find(c=>c.name===name) || { flag,name,currency,symbol,lang:lang||'es' };
  document.getElementById('selectedFlag').textContent = flag;
  document.getElementById('selectedCountryName').textContent = name;
  document.getElementById('countryDropdown').classList.remove('open');
  document.querySelectorAll('.country-option').forEach(o=>o.classList.remove('active'));
  e.currentTarget.classList.add('active');
  updateCountryContext();
  if(lang==='en') setLang('en');
  else if(lang==='pt') setLang('pt');
  else setLang('es');
}

function selectCountryByName(name){
  const c = COUNTRIES.find(x=>x.name===name);
  if(c){ currentCountry=c; updateCountryContext(); showPage('precios',null); }
}

function updateCountryContext(){
  const c = currentCountry;
  document.getElementById('cb-flag').textContent = c.flag;
  document.getElementById('cb-title').textContent = `${c.name} â€” ${c.currency} ${c.symbol}`;
  document.getElementById('cb-sub').textContent = c.trm===1?'Precio en USD directo':`Tasa de cambio: 1 USD = ${c.trm.toLocaleString()} ${c.currency}`;
  document.getElementById('currentCountryBanner').textContent = `${c.name} â€” ${c.currency}`;
  document.getElementById('chatCountry').textContent = c.name;
  document.getElementById('chatLangBadge').textContent = `${c.lang.toUpperCase()} ${c.flag}`;
  const tags = [`<span class="cb-tag tag-blue">LocalizaciÃ³n ${c.name}</span>`,`<span class="cb-tag tag-green">${c.currency} ${c.symbol}</span>`];
  const reg = REGULATIONS.find(r=>r.country===c.name);
  if(reg) tags.push(`<span class="cb-tag tag-orange">${reg.norm.split(',')[0]}</span>`);
  document.getElementById('cb-tags').innerHTML = tags.join('');
}

function filterRegion(r){ showPage('regional',null); }

// â”€â”€â”€ LANGUAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const i18n = {
  es:{ welcomeTitle:'Bienvenido, <span>JuliÃ¡n</span> ğŸ‘‹', welcomeSub:'Hub Comercial Regional Â· 21 paÃ­ses Â· Latam & EE.UU.' },
  en:{ welcomeTitle:'Welcome, <span>Julian</span> ğŸ‘‹', welcomeSub:'Regional Sales Hub Â· 21 countries Â· Latam & USA' },
  pt:{ welcomeTitle:'Bem-vindo, <span>Julian</span> ğŸ‘‹', welcomeSub:'Hub Comercial Regional Â· 21 paÃ­ses Â· Latam & EUA' }
};

function setLang(lang){
  currentLang = lang;
  ['btnEs','btnEn','btnPt'].forEach(id=>document.getElementById(id).classList.remove('active'));
  document.getElementById(lang==='es'?'btnEs':lang==='en'?'btnEn':'btnPt').classList.add('active');
  const t = i18n[lang];
  document.getElementById('welcomeTitle').innerHTML = t.welcomeTitle;
  document.getElementById('welcomeSub').textContent = t.welcomeSub;
}

// â”€â”€â”€ NAVIGATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showPage(id, el){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.sidebar-item').forEach(i=>i.classList.remove('active'));
  document.getElementById('page-'+id).classList.add('active');
  if(el) el.classList.add('active');
}

function setMatTab(btn, tabId){
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  document.querySelectorAll('.tab-content').forEach(t=>t.classList.remove('active'));
  btn.classList.add('active');
  document.getElementById(tabId).classList.add('active');
}

function setFunnel(el, icon, name, desc, count){
  document.querySelectorAll('.f-stage').forEach(s=>s.classList.remove('active'));
  el.classList.add('active');
  document.getElementById('funnel-ph').innerHTML = `<span class="panel-icon">${icon}</span><div><div class="panel-title">${name}</div><div class="panel-sub">${count} materiales Â· PaÃ­s actual: ${currentCountry.flag} ${currentCountry.name}</div></div>`;
  document.getElementById('funnel-desc').textContent = desc;
  const filtered = MATERIALS.filter(m=>m.stage===name);
  document.getElementById('funnel-cards').innerHTML = filtered.length ? filtered.map(renderCard).join('') : '<p style="color:var(--text2);font-size:13px">PrÃ³ximamente.</p>';
}

// â”€â”€â”€ SEARCH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function handleSearch(q){
  if(!q||q.length<2) return;
  const filtered = MATERIALS.filter(m=>m.title.toLowerCase().includes(q.toLowerCase())||m.stage.toLowerCase().includes(q.toLowerCase())||m.desc.toLowerCase().includes(q.toLowerCase()));
  showPage('materiales',null);
  document.getElementById('all-cards').innerHTML = filtered.length ? filtered.map(renderCard).join('') :
    `<div style="grid-column:1/-1;text-align:center;padding:40px;color:var(--text2)">Sin resultados para "<strong>${q}</strong>"</div>`;
  setMatTab(document.querySelector('.tab-btn'), 'tab-todos');
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  document.querySelector('.tab-btn').classList.add('active');
}

// â”€â”€â”€ GEMINI CHAT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const GEMINI_MODEL = 'gemini-3.1-pro-preview';
const GEMINI_API_KEY = 'TU_API_KEY_AQUÃ';

function buildSystemPrompt(){
  return `Eres el asistente comercial regional de ServinformaciÃ³n â€” empresa de LocalizaciÃ³n Inteligente lÃ­der en LATAM.
Tienes contexto de 21 paÃ­ses: Colombia, MÃ©xico, PerÃº, Brasil, Ecuador, Argentina, Chile, Paraguay, Guatemala, Honduras, El Salvador, Costa Rica, Bolivia, Rep. Dominicana, PanamÃ¡, Nicaragua, Jamaica, Puerto Rico, Trinidad y Tobago, Uruguay, y Estados Unidos.
PaÃ­s activo del vendedor: ${currentCountry.name} (${currentCountry.currency} ${currentCountry.symbol}).
Idioma actual: ${currentLang==='en'?'English':currentLang==='pt'?'PortuguÃªs':'EspaÃ±ol'}.
Responde en el idioma del usuario. Cuando sea relevante:
- Indica precios en moneda local (1 USD = ${currentCountry.trm} ${currentCountry.currency})
- Menciona regulaciones relevantes del paÃ­s
- Usa modismos/tono comercial apropiado para la regiÃ³n
- Sugiere materiales del hub por nombre y versiÃ³n
Materiales disponibles: PresentaciÃ³n Corporativa v4 (ES/EN/PT), Propuesta Enterprise v4 (ES/EN/PT), Listas de precios por moneda (CO/MX/BR/PE/AR...), Banco de Objeciones v5, Calculadora ROI v2, Casos de Ã‰xito, RegulaciÃ³n Legal 21 paÃ­ses, GuÃ­a Modismos, Contratos (ES/EN).`;
}

let chatHistory = [];
const demoReplies = {
  'precio': (c)=>`Para ${c.name} el precio del Plan Enterprise es ${c.symbol}${(1499*c.trm).toLocaleString('es-CO',{maximumFractionDigits:0})} ${c.currency}/mes (USD $1,499).\n\nUsa la Calculadora ROI v2 para mostrar el retorno en moneda local.`,
  'objeciÃ³n': ()=>`Para manejar objeciones de precio en LATAM:\n\nğŸ’¬ <b>Â«Es muy caroÂ»</b> â†’ Activa la Calculadora ROI â€” muestra retorno en moneda local.\nğŸ’¬ <b>Â«Tenemos competencia mÃ¡s barataÂ»</b> â†’ Comparativo vs. Competencia 2026.\nğŸ’¬ <b>Â«No hay presupuestoÂ»</b> â†’ PropÃ³n piloto 30 dÃ­as con 5 unidades.`,
  'regulac': (c)=>{ const r=REGULATIONS.find(x=>x.country===c.name); return r?`Para ${c.name}:\n\nğŸ“‹ <b>Normativa clave:</b> ${r.norm}\n\n${r.detail}`:`Consulta el documento "RegulaciÃ³n Legal por PaÃ­s v2" para ${c.name}.`; },
  'brasil': ()=>`ğŸ‡§ğŸ‡· Para Brasil, recuerda:\n\nâ€¢ Propuesta obligatoriamente en <b>portuguÃªs</b>\nâ€¢ Ley LGPD requiere consentimiento explÃ­cito de geolocalizaciÃ³n\nâ€¢ Usa "Proposta Enterprise â€” BR v3"\nâ€¢ Precio en BRL: R$${(1499*5.05).toLocaleString('pt-BR',{maximumFractionDigits:0})}/mÃªs`,
  'argentina': ()=>`ğŸ‡¦ğŸ‡· Para Argentina:\n\nâ€¢ Siempre cotiza en <b>USD</b> â€” menciona ARS como referencia\nâ€¢ Usa Â«vosÂ» no Â«tÃºÂ» ni Â«ustedÂ»\nâ€¢ Valoran argumentos tÃ©cnicos sÃ³lidos\nâ€¢ Tener clÃ¡usula de ajuste cambiario en contrato`,
};

async function sendMessage(){
  const input = document.getElementById('chatInput');
  const text = input.value.trim(); if(!text) return;
  addMessage(text,'user'); input.value=''; input.style.height='auto';
  showTyping();
  if(GEMINI_API_KEY==='TU_API_KEY_AQUÃ'){
    setTimeout(()=>{
      removeTyping();
      const key = Object.keys(demoReplies).find(k=>text.toLowerCase().includes(k));
      const reply = key ? demoReplies[key](currentCountry) : `Para ${currentCountry.name} (${currentCountry.currency}): ${text.length>20?'Consulta el material relevante en el hub o especifica la etapa del funnel y el sector del cliente.':'Â¿Puedes darme mÃ¡s detalles sobre la etapa del proceso y el sector del prospecto?'}`;
      const cards = MATERIALS.filter(()=>Math.random()>.65).slice(0,2).map(m=>({title:m.title,meta:`${m.ver} Â· ${m.lang.toUpperCase()} Â· ${m.stage}`}));
      addAIMessage(reply, cards);
    }, 900+Math.random()*500);
    return;
  }
  chatHistory.push({role:'user',parts:[{text}]});
  try {
    const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${GEMINI_MODEL}:generateContent?key=${GEMINI_API_KEY}`,
      {method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({system_instruction:{parts:[{text:buildSystemPrompt()}]},contents:chatHistory,generationConfig:{maxOutputTokens:1024,temperature:0.7}})});
    const data = await res.json();
    if(data.error) throw new Error(data.error.message);
    const reply = data.candidates?.[0]?.content?.parts?.[0]?.text||'Sin respuesta.';
    chatHistory.push({role:'model',parts:[{text:reply}]});
    removeTyping(); addAIMessage(reply,[]);
  } catch(err){ removeTyping(); addAIMessage(`âš ï¸ Error Gemini: ${err.message}`,[]); }
}

function sendChip(text){ document.getElementById('chatInput').value=text; sendMessage(); }

function addMessage(text, role){
  const c=document.getElementById('chatMessages'), isU=role==='user', d=document.createElement('div');
  d.className=`msg ${isU?'msg-user':'msg-ai'}`;
  d.innerHTML=`<div class="msg-av ${isU?'av-user':'av-ai'}">${isU?'ğŸ‘¤':'S'}</div><div><div class="msg-bubble">${text}</div><div class="msg-time">${new Date().toLocaleTimeString('es-CO',{hour:'2-digit',minute:'2-digit'})}</div></div>`;
  c.appendChild(d); c.scrollTop=c.scrollHeight;
}

function addAIMessage(text, cards){
  const c=document.getElementById('chatMessages'), d=document.createElement('div');
  d.className='msg msg-ai';
  const ch=cards.map(card=>`<div class="msg-card" onclick="alert('${card.title}')"><div class="msg-card-title">ğŸ“„ ${card.title}</div><div class="msg-card-meta">${card.meta}</div></div>`).join('');
  d.innerHTML=`<div class="msg-av av-ai">S</div><div><div class="msg-bubble">${text}${ch}</div><div class="msg-time">${new Date().toLocaleTimeString('es-CO',{hour:'2-digit',minute:'2-digit'})}</div></div>`;
  c.appendChild(d); c.scrollTop=c.scrollHeight;
}

function showTyping(){
  const c=document.getElementById('chatMessages'), d=document.createElement('div');
  d.className='msg msg-ai'; d.id='typing-indicator';
  d.innerHTML=`<div class="msg-av av-ai">S</div><div><div class="msg-bubble"><div class="typing"><span></span><span></span><span></span></div></div></div>`;
  c.appendChild(d); c.scrollTop=c.scrollHeight;
}
function removeTyping(){ const t=document.getElementById('typing-indicator'); if(t) t.remove(); }
</script>
</body>
</html>
